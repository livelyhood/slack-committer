name: Test
on:
  pull_request:
  workflow_dispatch:
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: yarn install
      - name: read users.json
        id: read-users
        run:  echo users=$(jq . users.json) >> $GITHUB_OUTPUT
      - name: Resolve slack committer
        id: slack-committer
        uses: penchef/slack-committer@v1.1
        with:
          # JSON mapping from Github user to slack userID or channelID.
          user-mapping: ${{ steps.read-users.outputs.users }}"
      - run: echo ${{ steps.slack-committer.outputs.username }}
